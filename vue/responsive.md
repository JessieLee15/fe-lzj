# Vue.响应式




## 原理

### 知识点
* 数据劫持/数据代理
* 依赖收集
* 发布订阅模式

### 实现

#### 数据劫持/数据代理
* Object.defineProperty
  * Vue通过设定对象属性的setter/getter方法监听数据变化（递归所有属性）：getter-收集依赖；setter-观察数据变化
  * 注：
    * 无法检测到对象属性的添加或删除
    * Object.defineProperty不能监听数组的变化，需要进行数组方法的重写（重写后还是有问题）
* ES6的Proxy
  * Proxy的代理是针对整个对象的，而不是对象的某个属性，且支持代理数组的变化
  * 兼容性不太好

#### 发布订阅模式
  * 订阅者 Dep : 用来收集依赖、删除依赖、向依赖发送消息等（依赖：watcher）
  * Watcher : 表示观察订阅依赖
  * 依赖收集的目的是将贯彻着Watcher对象存放到当前必报中的订阅者Dep的subs中
