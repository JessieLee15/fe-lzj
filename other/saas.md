# Saas方案

问题：
产品设计为导向
后端提供主要技术支持
前端怎么产品服务化？ 支持其他系统调用？ 集成自己的平台？（那后端服务化就行了啊，前端做交互啊）
所谓的提供给别人，实际成品是什么？ API？ 页面模块？
调用处？ 如何调用？ 
所谓的跨系统调用？ 何来跨？
多UI，UI面向用户
不是重新构建sass平台，而是改造，意思就是各种脚本补救  妈耶 想想就可怕
多系统：权限、UI统一

## 概念
所以来说saas是概念并不是什么租用，而是说他是“精装”，你拎包入住
pass是毛胚，房子有，你自己装
IaaS是说水泥有，钢材有，你自己盖
最后哪一种是说，水泥，钢材你自己买

SaaS是轻前端重后端的系统

前端是用户第一眼看到产品的地方，如何改善用户体验是前端最关心的问题。因为用户看得见摸得到，所以展现层的修改和调整会特别频繁，如何减少重复工作快速改进，这也是前端框架要解决的一个重要问题。web app和native app是前端的两种形式，目前看来各有优劣。 
　　web app的优点是开发速度快，云更新实时生效，不用维护历史版本。缺点是每个独立页面都要发起若干个http请求，交互滞后明显，体验较差。新兴的前端框架重点就要解决体验问题，像Angular框架的较大优点就是减少了页面请求。 
　　native app的优点是体验好，缺点是产品大量版本碎片，向下兼容维护工作量大。对于安卓手机，还有绕不开的适配问题。 
　　较优的解决方案是Hybrid模式：在native里面嵌入若干的webview页面，在效率和体验之间找到平衡点。 
　　相比传统的On-premises系统，SaaS系统的架构发生了巨大的变化，分层和模块化更为清晰，组合方式也更为复杂。

我们这个系统是部署在互联网上的开放SAAS系统，应用环境不太可能被预测或被限制，常用的降低浏览器版本来支持传统插件的方式一开始就被否掉了




## 参考系统
* 合从在线客服系统：https://aihecong.com/
* https://web.umeng.com/main.php?c=user&a=tip&code=1000&param3=aHR0cHM6Ly93ZWIudW1lbmcuY29tL21haW4ucGhwP2M9c2l0ZSZhPXNob3c=&channel=
* https://static.meiqia.com/dist/standalone.html?eid=89239&utm_source=widget-badge&utm_term=47312
* https://www.frontjs.com/app/ca7ae2eb1a411c178440bebd750c334b/performance/endpoint
* 顶象：https://www.dingxiang-inc.com/?from=baidu|0500101&renqun_youhua=164424




## 技术方面

### 插件植入   ：这个我们产品基本用不到吧，用到的也应该很少
聊天框等等
通用套路：一段自执行js脚本引入js插件，并扩展windows属性 然后调用处调用全局属性


### SaaS化

* 架构
  1. 无状态的Web服务器：例如web服务中常用的session，这种状态保持要求相同用户的请求都在同一台机器上处理。虽然可以利用session绑定IP的方式，将来自同一ip的请求转发到同一台服务器，但是假设那台服务器宕机，用户状态就会失效，仍然达不到高可用的效果。这时最好的方式就独立部署session服务器，可以利用缓存来实现。
  2. 没有硬连接
  3. 可扩展的数据模型
  4. 多租户的支持
  5. 界面的配置：如何设计你的应用来支持用户驱动的配置变化将变得非常关键
  6. API：
  7. 细致的考虑安全架构
  8. 同其它云平台的集成
* 应用托管环境：成熟的IaaS提供商
  * 可测量的计费
  * 快速的水平/垂直扩展
  * 可访问基于Web的安装包
  * 积极的监控
  * 全球部署的选项
  * 一键部署：一个云应用的架构可能并不简单。你的软件可能会需要很多个前端服务器，一个Web服务层，分布式的数据库，批量的任务处理系统，等等。如果可能，找到一个IaaS能够提供将解决方案做成模板，并且支持一键部署的。
  * 健壮的备份和恢复选项：灾难总会发
* 提供注册、管理和计费服务
  * 注册页面
  * 管理控制台：前面我们提到了界面的价值，它能够允许用户对外观或者功能进行一定程度的更改。不应该让你的客户通过一系列脚本或者REST API来实现这些配置更改，而必须提供一系列让客户查看和编辑这些数据的方法。比如，一个好的管理控制台需要能够支持安全角色设定(用户创建)和计费服务。


### 纯前端部分

* 持续优化用户体验： 
在用户体验上面，除了追求小而美的产品设计，还有个利器就是采用前端框架将web应用转换为单页应用。让用户在浏览器里就能得到如同客户端般的体验，操作网页里的内容不用刷新页面。如今各种前端框架日趋成熟，逸创云客服使用的前端框架有Backbone，Ember。前者属于轻量型，应用在了普通用户聊天端。后者适合处理复杂场景，应用在了客服工单系统后台。

使用前端框架的优点是分离了前后端，只通过接口进行交互。后端不用再负责模板渲染，输出页面的工作，web前端和各种移动端角色对等，后端API可以通用化。在进行单页改造时，需要注意利用前端的数据模型层，已经获取过的数据就不用再次请求了，从而进一步提高前端应用的性能，并减轻后端服务压力。另外还要定义好前后端的数据交互规范，可以采用Restful API，还可以使用JSON API。如果前端经常需要获取关联的多个资源对象，并且对象之间的关联关系比较复杂，建议使用JSON API。 